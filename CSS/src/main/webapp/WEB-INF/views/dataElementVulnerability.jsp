<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="true" %>
<%@ page import= "org.springframework.web.servlet.tags.*" %>
<%@ page import="war.model.DataElementEngineeringModel" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

<p>In ${dataelement.weatherEvent.year}, the port experienced a disruptive ${fn:toLowerCase(dataelement.weatherEvent.type)} event. This event impacted the port ${dataelement.weatherEvent.direct == true ? 'directly' : 'indirectly'} through the impact on its supply chain. The impact was described as: "${dataelement.weatherEvent.impact}"</p>

<p>The identified business consequences of these impacts, and their severity can be represented by the following graph:</p>

<script type="text/javascript">
	$(function () {
	
		var consequencesLabels = ["None", "Insignificant", "Moderate", "Major", "Extreme"];
		$('#${dataelementsfilter}-vulnerability-BarGraph${dataElementLoopIndex}').highcharts({
		            
		    chart: {
		        polar: false,
		        type: 'column'
		    },
		    
		    title: {
		        text: 'Consequences Rating of ${dataelement.weatherEvent.type} in ${dataelement.weatherEvent.year}',
		        x: -80
		    },
		    
		    pane: {
		    	size: '80%'
		    },
		    
		    legend: {
		    	enabled: false
		    },
		    
		    xAxis: {
		        categories: ['Lost time due to staff or contractor injuries', 'Staff not able to attend work', 'Increased annual Workcover costs', 
				'Increased maintenance costs', 'Deferment of capital expenditure', 'Increased insurance costs', 'Adverse reputational impact', 
				'Environmental impact - leading to regulatory impact', 'Interruption/halt to logistics operations', 
				'Interruption to boat movements', 'Altered dredging schedule'],
		        lineWidth: 0
		    },
		        
		    yAxis: {
		        gridLineInterpolation: 'polygon',
		        lineWidth: 0,
		        min: 0,
		        max: 4,
		        title: 'Rating',
		        labels: {
		            formatter: function() {
		                return consequencesLabels[this.value];
		            }
		        }
		    },
		    
		    tooltip: {
		    	shared: true
		    },
		    	    
		    series: [{
		        name: 'Consequences',
		        data: [${dataelement.weatherEvent.consequences}]
		    }]
		
		});
	});
</script>

<div id="${dataelementsfilter}-vulnerability-BarGraph${dataElementLoopIndex}" class="highcharts" style="width: 95%; margin: 10px auto">
</div>

<p>The port described their response to this disruptive climate related event as: ${dataelement.weatherEvent.responseAdequate == true ? 'adequate' : 'inadequate'}. The port has nominated the following changes as a result of the event: "${dataelement.weatherEvent.response}" .</p>